:root
{
	--bgA: #07070d;
	--bgB: #0b0d17;
	--card: rgba(12, 14, 26, 0.72);
	--stroke: rgba(255, 255, 255, 0.10);
	--stroke2: rgba(255, 255, 255, 0.07);
	--text: rgba(255, 255, 255, 0.92);
	--muted: rgba(255, 255, 255, 0.68);
	--muted2: rgba(255, 255, 255, 0.55);
	--shadow: 0 18px 60px rgba(0, 0, 0, 0.55);
	--r: 26px;

	--gradA: #615eef;
	--gradB: #ee0000;

	--barGrad: linear-gradient(90deg, #615eef 0%, #7d58d8 25%, #d61b5b 55%, #ee0000 100%);
}

*
{
	box-sizing: border-box;
}

html, body
{
	height: 100%;
}

body
{
	margin: 0;
	font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
	color: var(--text);
	background:
		radial-gradient(1200px 800px at 75% 15%, rgba(238, 0, 0, 0.22), transparent 60%),
		radial-gradient(1000px 700px at 15% 10%, rgba(97, 94, 239, 0.22), transparent 55%),
		linear-gradient(180deg, var(--bgB), var(--bgA));
	overflow-x: hidden;
}

.bgGlow
{
	position: fixed;
	inset: -40px;
	pointer-events: none;
	background:
		radial-gradient(900px 600px at 80% 10%, rgba(238, 0, 0, 0.18), transparent 62%),
		radial-gradient(900px 600px at 20% 20%, rgba(97, 94, 239, 0.18), transparent 62%);
	filter: blur(12px);
	opacity: 0.95;
}

.shell
{
	min-height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 22px 14px 26px 14px;
}

.card
{
	width: min(1080px, 100%);
	background: var(--card);
	border: 1px solid var(--stroke);
	border-radius: var(--r);
	box-shadow: var(--shadow);
	backdrop-filter: blur(18px);
	position: relative;
	padding: 22px 18px 58px 18px;
}

.step
{
	display: none;
}

.step.isActive
{
	display: block;
	animation: stepIn 320ms ease both;
}

@keyframes stepIn
{
	from { opacity: 0; transform: translateY(8px); }
	to { opacity: 1; transform: translateY(0); }
}

.title
{
	font-size: clamp(34px, 4vw, 52px);
	line-height: 1.02;
	margin: 0 0 10px 0;
	letter-spacing: -0.03em;
}

.lead
{
	margin: 0 0 18px 0;
	color: var(--muted);
	max-width: 46ch;
}

.welcomeGrid
{
	display: grid;
	grid-template-columns: 1.15fr 0.85fr;
	gap: 18px;
	align-items: center;
	padding: 10px 6px 8px 6px;
}

@media (max-width: 860px)
{
	.welcomeGrid
	{
		grid-template-columns: 1fr;
	}
}

.ctaRow
{
	display: flex;
	gap: 12px;
	flex-wrap: wrap;
	margin: 16px 0 14px 0;
}

.cta
{
	border: 1px solid var(--stroke);
	border-radius: 18px;
	padding: 14px 14px;
	background: rgba(255, 255, 255, 0.04);
	color: var(--text);
	display: grid;
	grid-template-columns: 42px 1fr 24px;
	align-items: center;
	gap: 12px;
	min-width: 240px;
	cursor: pointer;
	transition: transform 140ms ease, border-color 140ms ease, background 140ms ease;
}

.cta:hover
{
	transform: translateY(-1px);
	border-color: rgba(255, 255, 255, 0.16);
	background: rgba(255, 255, 255, 0.05);
}

.cta:active
{
	transform: translateY(0px) scale(0.99);
}

.ctaPrimary
{
	background:
		linear-gradient(90deg, rgba(97, 94, 239, 0.85), rgba(238, 0, 0, 0.78));
	border-color: rgba(255, 255, 255, 0.12);
}

.ctaPrimary:hover
{
	background:
		linear-gradient(90deg, rgba(97, 94, 239, 0.92), rgba(238, 0, 0, 0.86));
}

.ctaGhost
{
	background: rgba(255, 255, 255, 0.03);
}

.ctaIcon
{
	width: 42px;
	height: 42px;
	display: grid;
	place-items: center;
	border-radius: 14px;
	background: rgba(0, 0, 0, 0.22);
	border: 1px solid rgba(255, 255, 255, 0.10);
	font-size: 18px;
}

.ctaTitle
{
	font-weight: 700;
	font-size: 14px;
	letter-spacing: -0.01em;
}

.ctaDesc
{
	display: block;
	margin-top: 4px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.74);
}

.ctaArrow
{
	opacity: 0.85;
	font-size: 18px;
	text-align: right;
}

.manualLine
{
	margin-top: 10px;
	color: var(--muted2);
	font-size: 13px;
	display: flex;
	gap: 6px;
	align-items: center;
	flex-wrap: wrap;
}

.linkBtn
{
	border: none;
	background: none;
	color: rgba(255, 255, 255, 0.88);
	cursor: pointer;
	font-weight: 700;
	padding: 0;
	text-decoration: underline;
	text-decoration-color: rgba(255, 255, 255, 0.35);
	text-underline-offset: 3px;
}

/* FIX: mobile manual layout */
.manualBox
{
	margin-top: 10px;
	border: 1px solid var(--stroke2);
	border-radius: 18px;
	padding: 12px;
	background: rgba(0, 0, 0, 0.18);
	max-width: 560px;
}

.manualInputs
{
	display: grid;
	grid-template-columns: 1fr 1fr auto;
	gap: 10px;
	align-items: stretch;
}

.input
{
	width: 100%;
	min-width: 0;
	border: 1px solid var(--stroke);
	border-radius: 14px;
	padding: 12px 12px;
	background: rgba(255, 255, 255, 0.04);
	color: var(--text);
	outline: none;
}

@media (max-width: 560px)
{
	.manualBox
	{
		max-width: 100%;
	}

	.manualInputs
	{
		grid-template-columns: 1fr 1fr;
	}

	.manualInputs .btn
	{
		grid-column: 1 / -1;
		width: 100%;
	}
}

.input:focus
{
	border-color: rgba(255, 255, 255, 0.18);
}

.btn
{
	border: 1px solid var(--stroke);
	border-radius: 14px;
	padding: 11px 14px;
	background: rgba(255, 255, 255, 0.04);
	color: var(--text);
	cursor: pointer;
	transition: transform 140ms ease, border-color 140ms ease;
	font-weight: 700;
	white-space: nowrap;
}

.btn:hover
{
	transform: translateY(-1px);
	border-color: rgba(255, 255, 255, 0.16);
}

.btn:active
{
	transform: translateY(0px) scale(0.99);
}

.btnGhost
{
	background: rgba(0, 0, 0, 0.18);
}

.hint
{
	margin-top: 10px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
}

.errorBox
{
	margin-top: 14px;
	border: 1px solid rgba(238, 0, 0, 0.35);
	background: rgba(238, 0, 0, 0.08);
	color: rgba(255, 255, 255, 0.92);
	border-radius: 16px;
	padding: 12px 12px;
	font-size: 13px;
}

.hidden
{
	display: none;
}

/* Welcome sky */
.sunCard
{
	border: 1px solid var(--stroke2);
	border-radius: 22px;
	background: rgba(0, 0, 0, 0.18);
	padding: 14px;
	display: grid;
	gap: 12px;
}

.sky
{
	position: relative;
	height: 210px;
	border-radius: 18px;
	border: 1px solid rgba(255, 255, 255, 0.08);
	background:
		linear-gradient(180deg, rgba(97, 94, 239, 0.25), rgba(238, 0, 0, 0.15) 52%, rgba(0, 0, 0, 0.55) 100%);
	overflow: hidden;
}

.horizon
{
	position: absolute;
	left: 0;
	right: 0;
	bottom: 42px;
	height: 1px;
	background: rgba(255, 255, 255, 0.10);
}

.sunPath
{
	position: absolute;
	left: -10%;
	right: -10%;
	top: 12px;
	bottom: 18px;
	pointer-events: none;
	animation: sunArc 6.2s ease-in-out infinite;
}

.sun
{
	position: absolute;
	width: 68px;
	height: 68px;
	border-radius: 999px;
	left: 12%;
	top: 64%;
	background: radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.92), rgba(255, 200, 120, 0.92) 38%, rgba(255, 150, 80, 0.60) 70%, rgba(255, 120, 50, 0.18) 100%);
	box-shadow:
		0 0 40px rgba(255, 180, 120, 0.25),
		0 0 90px rgba(238, 0, 0, 0.12);
	animation: sunGlow 1.8s ease-in-out infinite;
}

@keyframes sunArc
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-56%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes sunGlow
{
	0% { transform: scale(1); }
	50% { transform: scale(1.03); }
	100% { transform: scale(1); }
}

.cloud
{
	position: absolute;
	width: 140px;
	height: 64px;
	border-radius: 999px;
	background: rgba(255, 255, 255, 0.10);
	border: 1px solid rgba(255, 255, 255, 0.10);
	opacity: 0.95;
}

.cloud::before,
.cloud::after
{
	content: "";
	position: absolute;
	background: inherit;
	border: inherit;
	width: 70px;
	height: 50px;
	border-radius: 999px;
	top: -14px;
	left: 16px;
}

.cloud::after
{
	width: 86px;
	height: 58px;
	top: -20px;
	left: 56px;
}

.c1 { top: 30px; left: 16px; animation: cloudMove 7.0s ease-in-out infinite; }
.c2 { top: 58px; left: 110px; opacity: 0.8; animation: cloudMove 8.4s ease-in-out infinite; }
.c3 { top: 92px; left: 42px; opacity: 0.7; animation: cloudMove 9.8s ease-in-out infinite; }
.c4 { top: 46px; left: -22px; opacity: 0.55; animation: cloudMove 10.2s ease-in-out infinite; }

@keyframes cloudMove
{
	0% { transform: translateX(0); }
	50% { transform: translateX(40px); }
	100% { transform: translateX(0); }
}

.miniBadge
{
	border: 1px solid rgba(255, 255, 255, 0.08);
	border-radius: 18px;
	padding: 12px;
	background: rgba(0, 0, 0, 0.18);
}

.miniTitle
{
	font-weight: 800;
	letter-spacing: -0.02em;
}

.miniSub
{
	margin-top: 4px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.68);
}

/* Loading step */
.loadingWrap
{
	padding: 22px 10px 10px 10px;
	display: grid;
	place-items: center;
	min-height: 420px;
}

.loadingHero
{
	width: min(820px, 100%);
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 18px;
	align-items: center;
}

@media (max-width: 860px)
{
	.loadingHero
	{
		grid-template-columns: 1fr;
	}
}

.loadingAnim
{
	border: 1px solid rgba(255, 255, 255, 0.08);
	border-radius: 22px;
	background: rgba(0, 0, 0, 0.18);
	padding: 14px;
}

.loadingText
{
	text-align: left;
}

.loadingTitle
{
	font-size: 36px;
	letter-spacing: -0.03em;
	font-weight: 900;
	margin-bottom: 8px;
}

.loadingLine
{
	color: rgba(255, 255, 255, 0.78);
	font-size: 14px;
	min-height: 20px;
}

.loadingTip
{
	margin-top: 12px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
	max-width: 58ch;
}

/* Result */
.pillRow
{
	display: flex;
	gap: 10px;
	flex-wrap: wrap;
	margin-bottom: 16px;
}

.pill
{
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(0, 0, 0, 0.16);
	border-radius: 999px;
	padding: 10px 12px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.80);
}

.pillSmall
{
	padding: 8px 10px;
}

.scoreRow
{
	display: grid;
	gap: 14px;
}

.scoreBig
{
	font-size: 66px;
	font-weight: 950;
	letter-spacing: -0.05em;
	line-height: 1;
}

.scorePct
{
	font-size: 22px;
	color: rgba(255, 255, 255, 0.70);
	margin-left: 8px;
}

.scoreLabel
{
	margin-top: 10px;
	font-size: 18px;
	font-weight: 800;
	color: rgba(255, 255, 255, 0.86);
}

.metaGrid
{
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
}

@media (max-width: 560px)
{
	.metaGrid
	{
		grid-template-columns: 1fr;
	}
}

.metaBox
{
	border: 1px solid rgba(255, 255, 255, 0.08);
	background: rgba(0, 0, 0, 0.16);
	border-radius: 18px;
	padding: 12px;
}

.metaKey
{
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
}

.metaVal
{
	margin-top: 6px;
	font-size: 18px;
	font-weight: 850;
	word-break: break-word;
}

.bar
{
	height: 14px;
	border-radius: 999px;
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(255, 255, 255, 0.04);
	overflow: hidden;
}

.barFill
{
	height: 100%;
	width: 0%;
	background: var(--barGrad);
	border-radius: 999px;
	transition: width 520ms ease;
}

.barAxis
{
	display: flex;
	justify-content: space-between;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.52);
	margin-top: 6px;
}

.resultMid
{
	margin-top: 18px;
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 12px;
}

@media (max-width: 860px)
{
	.resultMid
	{
		grid-template-columns: 1fr;
	}
}

.whyBox,
.colorBox
{
	border: 1px solid rgba(255, 255, 255, 0.08);
	background: rgba(0, 0, 0, 0.16);
	border-radius: 22px;
	padding: 14px;
}

.whyTitle,
.colorTitle
{
	font-weight: 900;
	letter-spacing: -0.02em;
	margin-bottom: 10px;
}

.reasons
{
	margin: 0;
	padding-left: 18px;
	color: rgba(255, 255, 255, 0.78);
	line-height: 1.5;
}

.reasons li
{
	margin: 8px 0;
}

.colorSub
{
	margin-top: -6px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
}

/* ---------- Result tone-driven scene ---------- */
.toneScene
{
	--cloudOpacity: 0.80;
	--cloudBlur: 0px;
	--cloudSat: 1.0;
	--cloudBright: 1.0;

	position: relative;
	height: 190px;
	border-radius: 18px;
	border: 1px solid rgba(255, 255, 255, 0.10);
	overflow: hidden;
	background: #0b1024;
	margin-top: 10px;
}

.toneSky
{
	position: absolute;
	inset: 0;
	opacity: 1;
	transition: background 420ms ease;
}

.toneHaze
{
	position: absolute;
	inset: 0;
	background: radial-gradient(800px 240px at 50% 60%, rgba(255, 255, 255, 0.10), transparent 62%);
	opacity: 0.0;
	transition: opacity 420ms ease;
}

.toneStars
{
	position: absolute;
	inset: 0;
	background:
		radial-gradient(2px 2px at 12% 18%, rgba(255, 255, 255, 0.7), transparent 60%),
		radial-gradient(1px 1px at 28% 14%, rgba(255, 255, 255, 0.6), transparent 60%),
		radial-gradient(2px 2px at 70% 20%, rgba(255, 255, 255, 0.55), transparent 60%),
		radial-gradient(1px 1px at 86% 16%, rgba(255, 255, 255, 0.6), transparent 60%),
		radial-gradient(2px 2px at 58% 28%, rgba(255, 255, 255, 0.45), transparent 60%);
	opacity: 0.0;
	transition: opacity 420ms ease;
}

.toneHorizon
{
	position: absolute;
	left: 0;
	right: 0;
	bottom: 48px;
	height: 1px;
	background: rgba(255, 255, 255, 0.10);
}

.toneWater
{
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	height: 54px;
	background:
		linear-gradient(180deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.55)),
		radial-gradient(120px 44px at 50% 20%, rgba(255, 180, 120, 0.22), transparent 60%);
	opacity: 0.95;
	transition: background 420ms ease;
}

.toneSunPath
{
	position: absolute;
	left: -12%;
	right: -12%;
	top: 10px;
	bottom: 28px;
	pointer-events: none;
	transform-origin: center;
	animation: toneArcGold 6.6s ease-in-out infinite;
	transition: filter 420ms ease;
}

.toneSun
{
	position: absolute;
	width: 62px;
	height: 62px;
	border-radius: 999px;
	left: 12%;
	top: 62%;
	background: radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.92), rgba(255, 200, 120, 0.92) 38%, rgba(255, 150, 80, 0.60) 70%, rgba(255, 120, 50, 0.18) 100%);
	box-shadow:
		0 0 42px rgba(255, 180, 120, 0.28),
		0 0 90px rgba(238, 0, 0, 0.10);
	animation: sunGlow 1.8s ease-in-out infinite;
	transition: filter 420ms ease, opacity 420ms ease;
}

.toneCloud
{
	position: absolute;
	width: 170px;
	height: 70px;
	border-radius: 999px;
	background: rgba(255, 255, 255, 0.10);
	border: 1px solid rgba(255, 255, 255, 0.10);
	opacity: var(--cloudOpacity);
	filter: blur(var(--cloudBlur)) saturate(var(--cloudSat)) brightness(var(--cloudBright));
	transition: opacity 420ms ease, filter 420ms ease;
}

.toneCloud::before,
.toneCloud::after
{
	content: "";
	position: absolute;
	background: inherit;
	border: inherit;
	width: 78px;
	height: 56px;
	border-radius: 999px;
	top: -16px;
	left: 18px;
}

.toneCloud::after
{
	width: 96px;
	height: 64px;
	top: -24px;
	left: 60px;
}

.tC1 { top: 28px; left: 10px; animation: cloudMove 8.2s ease-in-out infinite; }
.tC2 { top: 60px; left: 120px; animation: cloudMove 9.4s ease-in-out infinite; }
.tC3 { top: 92px; left: 44px; animation: cloudMove 10.6s ease-in-out infinite; }

/* Tone variants */
.toneScene--gold .toneSky
{
	background:
		linear-gradient(180deg, rgba(36, 40, 120, 0.55), rgba(255, 120, 60, 0.22) 55%, rgba(0, 0, 0, 0.62) 100%);
}

.toneScene--pink .toneSky
{
	background:
		linear-gradient(180deg, rgba(76, 40, 140, 0.55), rgba(255, 80, 170, 0.22) 52%, rgba(0, 0, 0, 0.65) 100%);
}

.toneScene--red .toneSky
{
	background:
		linear-gradient(180deg, rgba(50, 18, 40, 0.62), rgba(255, 60, 46, 0.25) 52%, rgba(0, 0, 0, 0.68) 100%);
}

.toneScene--muted .toneSky
{
	background:
		linear-gradient(180deg, rgba(24, 32, 70, 0.58), rgba(150, 170, 190, 0.18) 55%, rgba(0, 0, 0, 0.70) 100%);
}

.toneScene--grey .toneSky
{
	background:
		linear-gradient(180deg, rgba(18, 22, 36, 0.75), rgba(90, 100, 125, 0.16) 55%, rgba(0, 0, 0, 0.72) 100%);
}

/* cloud arc animations */
@keyframes toneArcGold
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-52%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes toneArcPink
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-58%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes toneArcRed
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-40%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes toneArcMuted
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-48%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes toneArcGrey
{
	0% { transform: translateX(0) translateY(0); }
	50% { transform: translateX(42%) translateY(-30%); }
	100% { transform: translateX(84%) translateY(0); }
}

@keyframes cloudMove
{
	0% { transform: translateX(0); }
	50% { transform: translateX(40px); }
	100% { transform: translateX(0); }
}

.palette
{
	margin-top: 12px;
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 10px;
}

@media (max-width: 520px)
{
	.palette
	{
		grid-template-columns: repeat(3, 1fr);
	}
}

.swatch
{
	border-radius: 16px;
	height: 58px;
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(255, 255, 255, 0.06);
	position: relative;
	overflow: hidden;
}

.swatch .swFill
{
	position: absolute;
	inset: 0;
}

.swatch .swLabel
{
	position: absolute;
	left: 10px;
	bottom: 8px;
	font-size: 11px;
	color: rgba(255, 255, 255, 0.78);
	text-shadow: 0 1px 12px rgba(0, 0, 0, 0.6);
	font-weight: 800;
}

.toneRow
{
	margin-top: 12px;
	display: flex;
	gap: 10px;
	align-items: center;
	flex-wrap: wrap;
}

.tonePill
{
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(255, 255, 255, 0.06);
	border-radius: 999px;
	padding: 10px 12px;
	font-weight: 900;
	letter-spacing: -0.01em;
}

.toneMeta
{
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
}

.caption
{
	margin-top: 14px;
	border-top: 1px solid rgba(255, 255, 255, 0.08);
	padding-top: 12px;
}

.capTitle
{
	font-weight: 900;
}

.capSub
{
	margin-top: 6px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.62);
}

.resultActions
{
	margin-top: 14px;
	display: flex;
	gap: 10px;
	align-items: center;
	flex-wrap: wrap;
}

.toast
{
	font-size: 12px;
	color: rgba(255, 255, 255, 0.86);
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(0, 0, 0, 0.20);
	border-radius: 999px;
	padding: 8px 10px;
}

.footerLine
{
	margin-top: 18px;
	font-size: 12px;
	color: rgba(255, 255, 255, 0.44);
}

/* Bottom controls */
.bottomBar
{
	position: absolute;
	left: 16px;
	right: 16px;
	bottom: 14px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	gap: 10px;
}

.iconBtn
{
	width: 42px;
	height: 42px;
	border-radius: 14px;
	border: 1px solid rgba(255, 255, 255, 0.10);
	background: rgba(0, 0, 0, 0.16);
	color: rgba(255, 255, 255, 0.86);
	cursor: pointer;
	font-size: 18px;
	transition: transform 140ms ease, border-color 140ms ease;
}

.iconBtn:hover
{
	transform: translateY(-1px);
	border-color: rgba(255, 255, 255, 0.16);
}

.iconBtn:active
{
	transform: translateY(0px) scale(0.99);
}
